{% extends "admin/base_site.html" %}
{% load i18n admin_urls admin_static admin_list bootstrapped_goodies_tags %}

{% if not is_popup %}
  {% block breadcrumbs %}
    <ul class="breadcrumb">
      <li><a href="{% url 'admin:index' %}">{% trans 'Home' %}</a></li>
      <li><a href="{% url 'admin:app_list' 'data' %}">Data</a></li>
      <li>{{ event|capfirst }} Import</li>
    </ul>
  {% endblock %}
{% endif %}

{% block object-tools %}
  <div id="content-navbar-collapse" class="navbar-collapse collapse">
    <div class="nav navbar-nav navbar-right">
      <button id="csv_earning_import" type="button" class="btn btn-primary">
        Import Earning
      </button>

      <button id="csv_dividend_import" type="button" class="btn btn-primary">
        Import Dividend
      </button>
    </div>
  </div>

  <script type="text/javascript">
    $("#csv_earning_import").click(function () {
      $(location).attr("href", "{% url 'admin:event_import' 'earning' %}");
    });

    $("#csv_dividend_import").click(function () {
      $(location).attr("href", "{% url 'admin:event_import' 'dividend' %}");
    });
  </script>

{% endblock %}


{% block content %}
  {% if files %}
    <div class="bs-example">
      <div class="alert alert-success">
        <a href="#" class="close" data-dismiss="alert">&times;</a>
        <strong>Success!</strong> All {{ event }} csv have been saved.
      </div>
    </div>
    <table class="table table-striped table-bordered">
      {% for f in files %}
        {% if forloop.first %}
          <thead>
          <tr>
            <th>No.</th>
            <th>Filename</th>
            <th>Date</th>
            <th>{{ event|capfirst }}</th>
          </tr>
          </thead>
        {% endif %}

        {% if f.fname %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ f.fname }}</td>
            <td>{{ f.date }}</td>
            <td>{{ f.event }}</td>
          </tr>
        {% else %}
          <tr>
            <td>...</td>
            <td>...</td>
            <td>...</td>
            <td>...</td>
          </tr>
        {% endif %}
      {% endfor %}
    </table>
  {% else %}
    <div class="bs-example">
      <div class="alert alert-warning">
        <a href="#" class="close" data-dismiss="alert">&times;</a>
        <strong>Empty!</strong> No new {{ event }} csv files in folder.
      </div>
    </div>
  {% endif %}
{% endblock %}