{% extends "base/base.html" %}

{% block webix-script %}
  <script type="text/javascript" charset="utf-8">
    var col1_data = [
      {
        id: "1", open: true, value: "Market News", path: "#", image: "",
        data: [
          {
            id: "1.1", value: "ToS live news", path: "#", image: ""
          },
          {
            id: "1.2", value: "S&P Capital report", path: "#", image: "",
          },
          {
            id: "1.3", value: "Finviz News", image: "",
            path: "http://finviz.com/quote.ashx?t={{ symbol|lower }}"
          },
          {
            id: "1.4", value: "Barchart News", image: "",
            path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/news"
          },
          {
            id: "1.5", value: "Zack News", image: "",
            path: "http://www.zacks.com/stock/research/{{ symbol }}/all-news"
          },
          {
            id: "1.6", value: "Nasdaq News", image: "",
            path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/news-headlines"
          },
        ]
      },
      {
        id: "2", open: false, value: "Social article", path: "#", image: "",
        data: [
          {
            id: "2.1", value: "Seeking Alpha", image: "",
            path: "http://seekingalpha.com/symbol/{{ symbol }}"
          },
          {
            id: "2.2", value: "Stocktwits", image: "",
            path: "http://stocktwits.com/symbol/{{ symbol }}"
          },
          {
            id: "2.3", value: "Talkmarket", image: "",
            path: "http://www.talkmarkets.com/symbol/{{ symbol }}"
          },
        ]
      },
      {
        id: "3", open: true, value: "Technical rank", path: "#", image: "",
        data: [
          {
            id: "3.1", value: "Marketedge", image: "",
            path: "http://www.marketedge.com"
          },
          {
            id: "3.2", value: "Chartmill", image: "",
            path: "http://www.chartmill.com"
          },
          {
            id: "3.3", value: "Opinion", image: "",
            path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/opinion"
          },

        ]
      },
      {
        id: "4", open: false, value: "Technical analysis", path: "#", image: "",
        data: [
          {
            id: "4.1", value: "ToS 14 indicator", image: "", path: "#"
          },
          {
            id: "4.2", value: "Barchart", image: "", path: "#",
            data: [
              {
                id: "4.2.1", value: "Performance report", image: "",
                path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/performance"
              },
              {
                id: "4.2.2", value: "Technical analysis", image: "",
                path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/technical-analysis"
              },
              {
                id: "4.2.3", value: "Cheat sheet", image: "",
                path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/cheat-sheet"
              },
              {
                id: "4.2.4", value: "Trading strategy", image: "",
                path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/trading-strategies"
              },
              {
                id: "4.2.5", value: "Price history", image: "",
                path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/price-history/historical"
              }
            ]
          },
          {
            id: "4.3", value: "Investing", image: "", path: "https://www.investing.com/",
            data: [
              {
                id: "4.3.1", value: "Technical Analysis", image: "",
                path: "#"
              },
              {
                id: "4.3.2", value: "Candlestick Patterns", image: "",
                path: "#"
              },
            ]
          },
        ]
      },
      {
        id: "5", open: false, value: "Industry analysis", path: "#", image: "",
        data: [
          {
            id: "5.1", value: "TDA", image: "", path: "#"
          },
          {
            id: "5.2", value: "Morningstar", image: "",
            path: "http://financials.morningstar.com/competitors/industry-peer.action?t={{ symbol }}"
          },
          {
            id: "5.3", value: "Zack", image: "",
            path: "http://www.zacks.com/stock/research/{{ symbol }}/industry-comparison"
          },

        ]
      },
      {
        id: "6", open: true, value: "Trade idea", path: "#", image: "",
        data: []
      },
    ];

    var col2_data = [
      {
        id: "1", open: false, value: "Share Outstanding", path: "#", image: "",
        data: [
          {
            id: "1.1", open: true, value: "Ownership", path: "#", image: "",
            data: [
              {
                id: "1.1.1", open: true, value: "Nasdaq", image: "",
                path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/institutional-holdings"
              },
              {
                id: "1.1.2", open: true, value: "Morningstar", image: "",
                path: "http://investors.morningstar.com/ownership/shareholders-overview.html?t={{ symbol }}"
              }
            ]
          },
          {
            id: "1.2", open: true, value: "Insider", path: "#", image: "",
            data: [
              {
                id: "1.2.1", open: true, value: "Jaywalk Consensus", image: "",
                path: ""
              },
              {
                id: "1.2.2", open: true, value: "Insider monkey", image: "",
                path: "http://www.insidermonkey.com/"
              },
              {
                id: "1.2.3", open: true, value: "Nasdaq", image: "",
                path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/insider-trades"
              },
              {
                id: "1.2.3", open: true, value: "Morningstar", image: "",
                path: "http://insiders.morningstar.com/trading/executive-compensation.action?t={{ symbol }}"
              }
            ]
          },
          {
            id: "1.3", open: true, value: "Pick", path: "#", image: "",
            data: [
              {
                id: "1.3.1", open: true, value: "Gurufocus", image: "fa-star-o",
                path: "http://www.gurufocus.com/gurutrades/{{ symbol }}"
              },
              {
                id: "1.3.2", open: true, value: "Insider Monkey", image: "",
                path: "http://www.insidermonkey.com/"
              },
            ]
          },
          {
            id: "1.4", open: true, value: "Short interest", path: "#", image: "",
            data: [
              {
                id: "1.4.1", open: true, value: "ShortSqueeze", image: "",
                path: "http://shortsqueeze.com/?symbol={{ symbol|lower }}"
              },
              {
                id: "1.4.2", open: true, value: "Nasdaq", image: "",
                path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/short-interest"
              },
              {
                id: "1.4.3", open: true, value: "YChart", image: "",
                path: "https://ycharts.com/companies/{{ symbol }}/short_interest"
              },
              {
                id: "1.4.3", open: true, value: "Gurufocus", image: "",
                path: "http://www.gurufocus.com/ownership/{{ symbol }}"
              },


            ]
          },
        ]
      },
      {
        id: "2", open: true, value: "Fundamental", path: "#", image: "",
        data: [
          {
            id: "2.1", open: true, value: "Price range", path: "#", image: "",
            data: [
              {
                id: "2.1.1", open: true, value: "Financial Time", image: "",
                path: "http://markets.ft.com/"
              },
              {
                id: "2.1.2", open: true, value: "Investing", image: "",
                path: "https://www.investing.com/"
              },
            ]
          },
          {
            id: "2.2", open: true, value: "Rank", path: "#", image: "",
            data: [
              {
                id: "2.2.1", open: true, value: "Research team", image: "", path: "#"
              },
              {
                id: "2.2.2", open: true, value: "Financial Time", image: "",
                path: "http://markets.ft.com/"
              },
              {
                id: "2.2.3", open: true, value: "Research team", image: "", path: "#"
              },
              {
                id: "2.2.4", open: true, value: "Research team", image: "", path: "#"
              },
              {
                id: "2.2.5", open: true, value: "Zack", image: "",
                path: "http://www.zacks.com/stock/research/{{ symbol }}/brokerage-recommendations"
              },
            ]
          }

        ]
      },
    ];
    var col3_data = [
      {
        id: "1", open: false, value: "Fidelity Event data", path: "#", image: "",
        data: [
          {
            id: "1.1", open: false, value: "Earnings", image: "",
            path: "https://eresearch.fidelity.com/eresearch/evaluate/fundamentals/earnings.jhtml?tab=details&symbols={{ symbol }}",
          },
          {
            id: "1.2", open: false, value: "Dividend", image: "",
            path: "https://eresearch.fidelity.com/eresearch/evaluate/fundamentals/dividends.jhtml?tab=details&symbols={{ symbol }}",
          },
        ]
      },
      {
        id: "2", open: false, value: "Split history", path: "#", image: "",
        data: [
          {
            id: "2.1", open: false, value: "GetSplitHistory", image: "",
            path: "http://getsplithistory.com/{{ symbol }}",
          },
          {
            id: "2.2", open: false, value: "StockSplitHistory", image: "",
            path: "https://www.stocksplithistory.com/?symbol={{ symbol|lower }}",
          },
        ]
      },
      {
        id: "3", open: false, value: "Interest rate", image: "",
        path: "https://www.federalreserve.gov/datadownload/default.htm"
      }
    ];

    var path = "{common.icon()} {common.folder()} " +
        "<span class='webix_icon #image#' style='float:right; margin:5px 12px 0px 1px;'></span>" +
        "<a href='#path#'>#value#</a>";

    webix.ui({
      container: "webix-content",
      id: "layout",
      minHeight: 1200,
      type: "space",
      cols: [
        {
          id: "tree1", width: 360, view: "tree", template: path, data: col1_data
        },
        {
          id: "tree2", view: "tree", template: path, data: col2_data
        },
        {
          id: "tree2", width: 360, view: "tree", template: path, data: col3_data
        },
      ]
    }).show();

    var form1 = [
      {id: "quote-search", view: "search", value: '', label: "Quote"}
    ];
    webix.ui({
      id: "form1",
      container: "title-object",
      view: "form", scroll: false, borderless: true,
      margin: 0, padding: 0, width: 360, elements: form1, hotkey: "enter"
    });

    $$("quote-search").attachEvent("onSearchIconClick", function () {
      var val = $$("quote-search").getValue();
      if (val.length) {
        webix.send("{% url 'quote_reference' %}" + $$("quote-search").getValue() + '/');
      }
    });


  </script>
{% endblock %}