{% extends "base/empty.html" %}

{% block extrastyle %}
  <style>
  .pad10 {
    padding-left: 1em;
  }

  .ref_icon {
    float: right;
    margin: 0.4em 12px;
  }
  </style>
{% endblock %}

{% block direct-content %}

{% endblock %}

{% block webix-script %}
  <script type="text/javascript">
    var ref_data = {
      technicalrank: [
        {
          id: "1", site: "Marketedge", tool: "Second opinion", image: "fa-star-o",
          path: "https://ameritradew.marketedge.com/Weekly/Stock/S/{{ symbol }}.asp?from=1&sym={{ symbol }}&r=0"

        },
        {
          id: "2", site: "Barchart", tool: "Opinion", image: "fa-star-o",
          path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/opinion"
        },
        {
          id: "3", site: "Chartmill", tool: "Analyzer", image: "fa-star-o",
          path: "http://www.chartmill.com/analyze.php#/{{ symbol|lower }}"
        }
      ],
      technicalopinion: [
        {
          id: "1", site: "Thinkorswim", tool: "Chart", image: "fa-star-o", path: "#"
        },
        {
          id: "2", site: "Thinkorswim", tool: "Prophet chart", image: "fa-star-o", path: "#"
        }
      ],
      stockprofile: [
        {
          id: "1.1", image: "fa-star-o", site: "TD Ameritrade", tool: "Report",
          path: "https://research.ameritrade.com/grid/wwws/research/stocks/" +
          "analystreports?c_name=invest_VENDOR&symbol={{ symbol|lower }}"
        },
        {
          id: "1.2", image: "fa-star-o", site: "Zack rank", tool: "Report",
          path: "https://www.zacks.com/stock/research/{{ symbol }}/brokerage-recommendations"
        },
        {
          id: "2", image: "fa-star-o", site: "Finviz", tool: "Upgrade/Downgrade",
          path: "http://finviz.com/quote.ashx?t={{ symbol|lower }}"
        },
        {
          id: "3", image: "fa-star-o", site: "Financial Time", tool: "Forecast",
          path: "https://markets.ft.com/data/equities/tearsheet/forecasts?s={{ symbol }}:NYQ"
        },

        {
          id: "4.1", image: "", site: "Nasdaq", tool: "Institute Holding",
          path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/institutional-holdings"
        },
        {
          id: "4.2.1", image: "", site: "Gurufocus", tool: "Ownership history",
          path: "http://www.gurufocus.com/ownership/{{ symbol }}"
        },
        {
          id: "4.2.2", image: "fa-file-excel-o", site: "Excel", tool: "Ownership report",
          path: "{% url 'excel_date_price' %}"
        },
        {
          id: "4.3", image: "", site: "System", tool: "Season price",
          path: "{% url 'excel_date_price' %}"
        },
        {
          id: "5.1", site: "Nasdaq", tool: "Insider trade", image: "",
          path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/insider-trades"
        },
        {
          id: "5.2", site: "InsiderTrading", tool: "History", image: "",
          path: "http://insidertrading.org/index.php?sort_by=transaction_date&asc=&" +
                "symbol={{ symbol|lower }}&date_from=2010-01-01&date_to={{ report_enter.date }}&submit=+GO+"
        },
        {
          id: "6.1.1", site: "ShortSqueeze", tool: "Data", image: "",
          path: "http://shortsqueeze.com/?symbol={{ symbol|lower }}"
        },
        {
          id: "6.1.2", site: "Excel", tool: "IB Data & Chart", image: "fa-file-excel-o",
          path: "{% url 'excel_date_price' %}"
        },
        {
          id: "6.4", image: "", site: "Nasdaq", tool: "Short interest",
          path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/short-interest"
        },
        {
          id: "7", image: "fa-star-o", site: "Zack", tool: "Industry peer & chart",
          path: "http://www.zacks.com/stock/research/{{ symbol }}/industry-comparison"
        },
        {
          id: "8", image: "fa-star-o", site: "TD Ameritrade", tool: "Peer compare",
          path: "https://research.ameritrade.com/grid/wwws/research/stocks/" +
                "industryposition?symbol={{ symbol }}&c_name=invest_VENDOR"
        },
        {
          id: "9", image: "fa-calendar", site: "System", tool: "Earning report",
          path: "{% url 'report_earning' symbol|lower %}"
        }
      ],
      underlyingarticle: [
        {
          id: "1", image: "fa-star-o", site: "Thinkorswim", tool: "Live news",
          path: "#"
        },
        {
          id: "2", image: "fa-star-o", site: "TD Ameritrade", tool: "S&P IQ news",
          path: "https://research.ameritrade.com/grid/wwws/research/stocks/" +
                "analystreports?c_name=invest_VENDOR&symbol={{ symbol|lower }}"
        },
        {
          id: "3", image: "fa-star-o", site: "Finviz", tool: "News",
          path: "http://finviz.com/quote.ashx?t={{ symbol|lower }}"
        },
        {
          id: "4", image: "fa-star-o", site: "Barchart", tool: "News",
          path: "https://www.barchart.com/stocks/quotes/{{ symbol }}/news"
        },
        {
          id: "5", image: "fa-star-o", site: "Zack", tool: "News",
          path: "http://www.zacks.com/stock/research/{{ symbol }}/all-news"
        },
        {
          id: "6", image: "", site: "Nasdaq", tool: "News",
          path: "http://www.nasdaq.com/symbol/{{ symbol|lower }}/news-headlines"
        }
      ],
      positionidea: [

      ],
      positionenter: [
        {
          id: "1", image: "fa-star-o", site: "Thinkorswim", tool: "Analysis",
          path: "#"
        }
      ],
      positiondecision: [
        {
          id: "1", image: "fa-star-o", site: "Rivers", tool: "Summary report",
          path: "#"
        }
      ],
      stockreport: [
        {
          id: "1", image: "fa-star-o", site: "Rivers", tool: "Ready Excel RTD",
          path: "{% url 'excel_rtd_create' %}"
        },
        {
          id: "3", image: "fa-star-o", site: "Rivers", tool: "Ticker Minute1",
          path: "#"
        }
      ]
    };

    var property_data = [
      {label: "Technical created?", type: "label"},
      {
        label: "Rank", type: "select",
        options: {{ summary.technicalrank|safe }},
        value: {{ summary.technicalrank|safe }}[0]
      },
      {
        label: "Opinion", type: "select",
        options: {{ summary.technicalopinion|safe }},
        value: {{ summary.technicalopinion|safe }}[0]
      },
      {label: "Position created?", type: "label"},
      {label: "Idea", type: "text", value: "{{ summary.positionidea }}"},
      {label: "Enter", type: "text", value: "{{ summary.positionenter }}"},
      {label: "Decision", type: "text", value: "{{ summary.positiondecision }}"},
      {label: "Stock created?", type: "label"},
      {label: "Fundamental", type: "text", value: "{{ summary.stockfundamental }}"},
      {label: "Industry", type: "text", value: "{{ summary.stockindustry }}"},
      {label: "Article", type: "text", value: "{{ summary.underlyingarticle }}"}
    ];

    webix.ui({
      cols: [
        {
          view: "list",
          gravity: 1,
          template: "<span class='webix_icon #image# ref_icon'></span>" +
                    "<a href='#path#' target='_blank'>#id#. #site#: #tool#</a>",
          data: ref_data.{{ model }}
        },
        {
          // editable: false,
          // readonly: true,
          view: "property",
          id: "sets",
          scroll: true,
          elements: property_data

        },
      ]
    });

  </script>
{% endblock %}